#include <stdio.h>
#include <stdlib.h>

#define MAX_N 100
#define MAX_M 100

int input_static(int matrix[MAX_N][MAX_M], int *n, int *m);
int input_dynamic(int ***matrix, int *n, int *m);
void output_static(int matrix[MAX_N][MAX_M], int n, int m);
void output(int **matrix, int n, int m);
void find_max_by_rows(int **matrix, int n, int m, int *result);
void find_min_by_cols(int **matrix, int n, int m, int *result);
void transform(int *buf, int **matrix, int n, int m);
void free_matrix(int **matrix, int n);

int main(void) {
    int type, n = 0, m = 0, ok = 1;
    int matrix_static[MAX_N][MAX_M];
    int *matrix_buf[MAX_N];
    int *max_in_rows = NULL;
    int *min_in_cols = NULL;
    int **matrix = NULL;

    if (scanf("%d", &type) != 1) {
        ok = 0;
    } else {
        if (type == 1) {
            ok = input_static(matrix_static, &n, &m);
        } else if (type == 2) {
            ok = input_dynamic(&matrix, &n, &m);
        } else {
            ok = 0;
        }
    }

    if (ok) {
        max_in_rows = malloc(n * sizeof(int));
        min_in_cols = malloc(m * sizeof(int));
        if (max_in_rows == NULL || min_in_cols == NULL) {
            ok = 0;
        }
    }

    if (ok) {
        if (type == 1) {
            for (int i = 0; i < n; i++) {
                matrix_buf[i] = matrix_static[i];
            }
            output_static(matrix_static, n, m);
            find_max_by_rows(matrix_buf, n, m, max_in_rows);
            find_min_by_cols(matrix_buf, n, m, min_in_cols);
        } else {
            output(matrix, n, m);
            find_max_by_rows(matrix, n, m, max_in_rows);
            find_min_by_cols(matrix, n, m, min_in_cols);
        }

        printf("\n");
        for (int i = 0; i < n; i++) {
            printf("%d", max_in_rows[i]);
            if (i < n - 1) printf(" ");
        }
        printf("\n");
        for (int j = 0; j < m; j++) {
            printf("%d", min_in_cols[j]);
            if (j < m - 1) printf(" ");
        }
    } else {
        printf("n/a");
    }

    free(max_in_rows);
    free(min_in_cols);
    if (type == 2) {
        free_matrix(matrix, n);
    }

    return 0;
}

int input_static(int matrix[MAX_N][MAX_M], int *n, int *m) {
    int ok = 1, c;
    if (scanf("%d%d", n, m) != 2 || *n <= 0 || *m <= 0 || *n > MAX_N || *m > MAX_M) {
        ok = 0;
    }
    for (int i = 0; i < *n && ok; i++) {
        for (int j = 0; j < *m && ok; j++) {
            if (scanf("%d", &matrix[i][j]) != 1) {
                ok = 0;
            }
        }
    }
    while ((c = getchar()) != '\n' && c != EOF) {
        if (c != ' ' && c != '\t') {
            ok = 0;
        }
    }
    return ok;
}

int input_dynamic(int ***matrix, int *n, int *m) {
    int ok = 1, c;
    int *buf = NULL;

    if (scanf("%d%d", n, m) != 2 || *n <= 0 || *m <= 0) {
        ok = 0;
    }

    if (ok) {
        *matrix = malloc(*n * sizeof(int *));
        buf = malloc(*n * *m * sizeof(int));
        if (*matrix == NULL || buf == NULL) {
            ok = 0;
        } else {
            transform(buf, *matrix, *n, *m);
        }
    }

    for (int i = 0; i < *n && ok; i++) {
        for (int j = 0; j < *m && ok; j++) {
            if (scanf("%d", &(*matrix)[i][j]) != 1) {
                ok = 0;
            }
        }
    }

    while ((c = getchar()) != '\n' && c != EOF) {
        if (c != ' ' && c != '\t') {
            ok = 0;
        }
    }

    if (!ok) {
        free(buf);
        free(*matrix);
    }

    return ok;
}

void transform(int *buf, int **matrix, int n, int m) {
    for (int i = 0; i < n; i++) {
        matrix[i] = buf + i * m;
    }
}

void output_static(int matrix[MAX_N][MAX_M], int n, int m) {
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < m; j++) {
            printf("%d", matrix[i][j]);
            if (j < m - 1) {
                printf(" ");
            }
        }
        if (i < n - 1) {
            printf("\n");
        }
    }
}

void output(int **matrix, int n, int m) {
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < m; j++) {
            printf("%d", matrix[i][j]);
            if (j < m - 1) {
                printf(" ");
            }
        }
        if (i < n - 1) {
            printf("\n");
        }
    }
}

void find_max_by_rows(int **matrix, int n, int m, int *result) {
    for (int i = 0; i < n; i++) {
        result[i] = matrix[i][0];
        for (int j = 1; j < m; j++) {
            if (matrix[i][j] > result[i]) {
                result[i] = matrix[i][j];
            }
        }
    }
}

void find_min_by_cols(int **matrix, int n, int m, int *result) {
    for (int j = 0; j < m; j++) {
        result[j] = matrix[0][j];
        for (int i = 1; i < n; i++) {
            if (matrix[i][j] < result[j]) {
                result[j] = matrix[i][j];
            }
        }
    }
}

void free_matrix(int **matrix, int n) {
    if (matrix != NULL && matrix[0] != NULL) {
        free(matrix[0]);
        free(matrix);
    }
}
