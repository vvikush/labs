CC = gcc
CFLAGS = -Wall -Werror -Wextra -std=c99
SRC = src/s21_string.c src/s21_string_test.c
OUT_DIR = build

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ü–µ–ª—å, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ make —Ä–∞–±–æ—Ç–∞–µ—Ç
all:
	@echo "–ò—Å–ø–æ–ª—å–∑—É–π make <–Ω–∞–∑–≤–∞–Ω–∏–µ_—Ç–µ—Å—Ç–∞> –Ω–∞–ø—Ä–∏–º–µ—Ä make strlen_tests"

strlen_tests:
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) -DRUN_STRLEN $(SRC) -o $(OUT_DIR)/Quest_1

strcmp_tests:
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) -DRUN_STRCMP $(SRC) -o $(OUT_DIR)/Quest_2

strcpy_tests:
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) -DRUN_STRCPY $(SRC) -o $(OUT_DIR)/Quest_3

# –î–æ–ø–∏—à–∏ –¥–∞–ª—å—à–µ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏:
strcat_tests:
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) -DRUN_STRCAT $(SRC) -o $(OUT_DIR)/Quest_4

strchr_tests:
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) -DRUN_STRCHR $(SRC) -o $(OUT_DIR)/Quest_5

strstr_tests:
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) -DRUN_STRSTR $(SRC) -o $(OUT_DIR)/Quest_6

clean:
	rm -rf $(OUT_DIR)




void s21_strchr_test() {
    test_strchr("hello", 'e', 1);         // SUCCESS
    test_strchr("world", 'z', -1);        // SUCCESS (–Ω–µ –Ω–∞–π–¥–µ–Ω)
    test_strchr("abcabc", 'c', 2);        // SUCCESS (–ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ)
    test_strchr("", 'a', -1);             // SUCCESS (–≤ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ)
    test_strchr("edge\0test", '\0', 4);   // SUCCESS (–∏—â–µ–º '\0')
    test_strchr(NULL, 'a', -1);           // SUCCESS (NULL-—Å—Ç—Ä–æ–∫–∞)

    // üî¥ –ù–∞–º–µ—Ä–µ–Ω–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ (FAIL)
    test_strchr("mistake", 's', 3);       // FAIL: 's' –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 2, –∞ –Ω–µ 3
}



void test_strchr(const char *str, int c, int expected_index) {
    char *result = s21_strchr(str, c);
    int actual_index = -1;

    if (result != NULL && str != NULL) {
        actual_index = result - str;  // –≤—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é
    }

    if (actual_index == expected_index) {
        printf("strchr test: SUCCESS\n");
    } else {
        printf("strchr test: FAIL (got: %d, expected: %d)\n", actual_index, expected_index);
    }
}


char *s21_strchr(const char *str, int c) {
    char *result = NULL;

    if (str != NULL) {
        int found = 0;

        while (*str != '\0' && !found) {
            if (*str == (char)c) {
                result = (char *)str;
                found = 1;
            } else {
                str++;
            }
        }

        if (!found && c == '\0') {
            result = (char *)str;
        }
    }

    return result;
}



char *s21_strchr(const char *str, int c) {
    char *result = NULL;

    if (str != NULL) {
        while (*str != '\0') {
            if (*str == (char)c) {
                result = (char *)str;
                break;
            }
            str++;
        }

        if (result == NULL && c == '\0') {
            result = (char *)str;  // —É–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä
        }
    }

    return result;
}


void s21_strcat_test() {
    test_strcat("Hello", "World", "HelloWorld");            // –æ–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π
    test_strcat("", "World", "World");                      // –ø—É—Å—Ç–æ–π base
    test_strcat("Hello", "", "Hello");                      // –ø—É—Å—Ç–æ–π src
    test_strcat("", "", "");                                // –æ–±–∞ –ø—É—Å—Ç—ã–µ
    test_strcat("abc", "def", "abcdef");                    // –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
    test_strcat("x", "y", "xy");                            // 1 —Å–∏–º–≤–æ–ª + 1 —Å–∏–º–≤–æ–ª

    // –∫—Ä–∞–µ–≤–æ–π —Å–ª—É—á–∞–π: –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
    char big[101], result[201];
    for (int i = 0; i < 100; i++) big[i] = 'x';
    big[100] = '\0';
    s21_strcpy(result, big);
    s21_strcat(result, big);
    test_strcat(big, big, result);  // –æ–∂–∏–¥–∞–Ω–∏–µ: 200 'x' + '\0'

    // ‚ùå –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ FAIL)
    test_strcat("Hello", "World", "Hello_World");
}


void test_strcat(const char *base, const char *add, const char *expected) {
    char buffer[200];

    s21_strcpy(buffer, base);           // –∫–æ–ø–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É
    char *result = s21_strcat(buffer, add);  // –¥–æ–±–∞–≤–ª—è–µ–º –≤—Ç–æ—Ä—É—é

    int ok = 1;
    for (int i = 0; expected[i] != '\0' || result[i] != '\0'; i++) {
        if (expected[i] != result[i]) {
            ok = 0;
        }
    }

    if (ok) {
        printf("strcat test: SUCCESS\n");
    } else {
        printf("strcat test: FAIL (got: \"%s\", expected: \"%s\")\n", result, expected);
    }
}


char *s21_strcat(char *dest, const char *src) {
    char *original = dest;

    if (dest != NULL && src != NULL) {
        while (*dest != '\0') {
            dest++;
        }

        while (*src != '\0') {
            *dest = *src;
            dest++;
            src++;
        }

        *dest = '\0';
    }

    return original;
}
–∑


void test_strcpy(const char *src, const char *expected) {
    char buffer[100];  // –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±—É—Ñ–µ—Ä
    char *result = s21_strcpy(buffer, src);

    int ok = 1;
    for (int i = 0; expected[i] != '\0' || result[i] != '\0'; i++) {
        if (expected[i] != result[i]) {
            ok = 0;
        }
    }

    if (ok) {
        printf("strcpy test: SUCCESS\n");
    } else {
        printf("strcpy test: FAIL (got: \"%s\", expected: \"%s\")\n", result, expected);
    }
}

void s21_strcpy_test() {
    test_strcpy("hello", "hello");
    test_strcpy("", "");
    test_strcpy("123 456", "123 456");
    test_strcpy("a", "a");
    test_strcpy("testing edge case!", "testing edge case!");
}



char *s21_strcpy(char *dest, const char *src) {
    char *original = dest;

    if (dest != NULL && src != NULL) {
        while (*src != '\0') {
            *dest = *src;
            dest++;
            src++;
        }
        *dest = '\0';
    }

    return original;
}



#include "s21_string.h"
#include <stdio.h>
#include <stdlib.h>

// —Ç–µ—Å—Ç–æ–≤–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è strlen
void test_strlen(const char *input, unsigned long expected) {
    unsigned long result = s21_strlen(input);
    if (result == expected) {
        printf("strlen test: SUCCESS\n");
    } else {
        printf("strlen test: FAIL (expected %lu, got %lu)\n", expected, result);
    }
}

void s21_strlen_test() {
    test_strlen("school", 6);
    test_strlen("", 0);
    test_strlen("nyiarubvruipbuavapriuabvarg", 27);
    test_strlen("school sber", 11);
    test_strlen(NULL, 0);
}

// —Ç–µ—Å—Ç–æ–≤–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è strcmp
void test_strcmp(const char *str1, const char *str2, int expected) {
    int result = s21_strcmp(str1, str2);
    if ((result == 0 && expected == 0) ||
        (result < 0 && expected < 0) ||
        (result > 0 && expected > 0)) {
        printf("strcmp test: SUCCESS\n");
    } else {
        printf("strcmp test: FAIL (expected %d, got %d)\n", expected, result);
    }
}

void s21_strcmp_test() {
    test_strcmp("abc", "abc", 0);
    test_strcmp("abc", "abd", -1);
    test_strcmp("abd", "abc", 1);
    test_strcmp("", "abc", -1);
    test_strcmp("", "", 0);
    test_strcmp(NULL, "abc", -1);
    test_strcmp("abc", NULL, 1);
    test_strcmp(NULL, NULL, 0);
}

int main() {
    s21_strlen_test();
    s21_strcmp_test();
    return 0;
}



void s21_strcmp_test() {
    // –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏
    if (s21_strcmp("abc", "abc") == 0) {
        printf("strcmp test 1: SUCCESS\n");
    } else {
        printf("strcmp test 1: FAIL\n");
    }

    // str1 < str2
    if (s21_strcmp("abc", "abd") < 0) {
        printf("strcmp test 2: SUCCESS\n");
    } else {
        printf("strcmp test 2: FAIL\n");
    }

    // str1 > str2
    if (s21_strcmp("abd", "abc") > 0) {
        printf("strcmp test 3: SUCCESS\n");
    } else {
        printf("strcmp test 3: FAIL\n");
    }

    // –∫—Ä–∞–µ–≤–æ–π —Å–ª—É—á–∞–π: –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –ø—É—Å—Ç–∞—è
    if (s21_strcmp("", "abc") < 0) {
        printf("strcmp test 4: SUCCESS\n");
    } else {
        printf("strcmp test 4: FAIL\n");
    }

    // –æ–±–µ –ø—É—Å—Ç—ã–µ
    if (s21_strcmp("", "") == 0) {
        printf("strcmp test 5: SUCCESS\n");
    } else {
        printf("strcmp test 5: FAIL\n");
    }

    // —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å NULL (–∫—Ä–∞–µ–≤–æ–π —Å–ª—É—á–∞–π)
    if (s21_strcmp(NULL, "abc") < 0) {
        printf("strcmp test 6: SUCCESS\n");
    } else {
        printf("strcmp test 6: FAIL\n");
    }
}



int s21_strcmp(const char *str1, const char *str2) {
    int result = 0;

    int null_case = 0;

    if (str1 == NULL && str2 == NULL) {
        result = 0;
        null_case = 1;
    }

    if (!null_case && str1 == NULL) {
        result = -1;
        null_case = 1;
    }

    if (!null_case && str2 == NULL) {
        result = 1;
        null_case = 1;
    }

    while (!null_case && *str1 != '\0' && *str2 != '\0') {
        if (*str1 != *str2) {
            result = (*str1 > *str2) ? 1 : -1;
            null_case = 1;
        }
        str1++;
        str2++;
    }

    if (!null_case && *str1 != *str2) {
        result = (*str1 > *str2) ? 1 : -1;
    }

    return result;
}



CC = gcc
CFLAGS = -Wall -Werror -Wextra -std=c11
SRC = src/s21_string.c src/s21_string_test.c
OUT_DIR = build
OUT = $(OUT_DIR)/Quest_1

strlen_tests: $(SRC)
	mkdir -p $(OUT_DIR)
	$(CC) $(CFLAGS) $(SRC) -o $(OUT)

clean:
	rm -rf $(OUT_DIR)
